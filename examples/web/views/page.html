{% extends "layout.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="page-layout">
    <article class="page-content">
        <h1 class="page-title">{{ title }}</h1>

        {% if content %}
            {% if content.summary %}
            <p class="page-summary">{{ content.summary }}</p>
            {% endif %}

            {% if content.content %}
                {% if content.content.body %}
                <div class="page-body">
                    {{ content.content.body|safe }}
                </div>
                {% endif %}
            {% endif %}
        {% endif %}

        {% if blocks %}
        <section class="page-blocks">
            <h2>Page Blocks</h2>
            {% for block in blocks %}
            <div class="block">
                <h3>{{ block.region }}</h3>
                <div class="block-content">
                    {% if block.content.title %}
                    <h4>{{ block.content.title }}</h4>
                    {% endif %}
                    {% if block.content.body %}
                    <p>{{ block.content.body }}</p>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </section>
        {% endif %}
    </article>

    <aside class="sidebar">
        {% if widgets %}
        <section class="sidebar-widgets">
            <h3>Sidebar Widgets</h3>
            {% for widget in widgets %}
            <div class="widget">
                {% if widget.instance %}
                    {% if widget.instance.configuration %}
                        {% if widget.instance.configuration.headline %}
                        <h4>{{ widget.instance.configuration.headline }}</h4>
                        {% endif %}
                        {% if widget.instance.configuration.cta_text %}
                        <a href="#" class="widget-cta">{{ widget.instance.configuration.cta_text }}</a>
                        {% endif %}
                    {% endif %}
                {% endif %}
            </div>
            {% endfor %}
        </section>
        {% else %}
        <p>No widgets available for this area.</p>
        {% endif %}

        <section class="sidebar-info">
            <h3>Page Info</h3>
            <dl class="info-list">
                <dt>Slug:</dt>
                <dd><code>{{ page.slug }}</code></dd>
                <dt>Status:</dt>
                <dd><span class="status {{ page.status }}">{{ page.status }}</span></dd>
                <dt>Locale:</dt>
                <dd><span class="locale-badge">{{ locale }}</span></dd>
                {% if translation.path %}
                    <dt>Path:</dt>
                    <dd><code>{{ translation.path }}</code></dd>
                {% endif %}
            </dl>
        </section>
    </aside>
</div>
{% endblock %}
