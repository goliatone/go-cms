{% extends "layout.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="page-layout">
    <article class="page-content">
        <h1 class="page-title">{{ title }}</h1>

        {% if content %}
            {% if content.summary %}
            <p class="page-summary">{{ content.summary }}</p>
            {% endif %}

            {% if content.content %}
                {% if content.content.body %}
                <div class="page-body">
                    {{ content.content.body|safe }}
                </div>
                {% endif %}
            {% endif %}
        {% endif %}

        {% if blocks %}
        <section class="page-blocks">
            {% for block in blocks %}
            <div class="block block-{{ block.region }}">
                {% if block.content.title or block.content.headline %}
                <div class="block-header">
                    {% if block.content.title %}
                    <h2>{{ block.content.title }}</h2>
                    {% endif %}
                    {% if block.content.headline %}
                    <h2>{{ block.content.headline }}</h2>
                    {% endif %}
                    {% if block.content.subtitle %}
                    <p class="block-subtitle">{{ block.content.subtitle }}</p>
                    {% endif %}
                </div>
                {% endif %}

                <div class="block-content">
                    {% if block.content.body %}
                    <div class="block-body">{{ block.content.body }}</div>
                    {% endif %}

                    {% if block.content.description %}
                    <p class="block-description">{{ block.content.description }}</p>
                    {% endif %}

                    {% if block.content.features %}
                    <div class="features-grid">
                        {% for feature in block.content.features %}
                        <div class="feature-card">
                            {% if feature.icon %}
                            <div class="feature-icon">{{ feature.icon }}</div>
                            {% endif %}
                            {% if feature.title %}
                            <h3 class="feature-title">{{ feature.title }}</h3>
                            {% endif %}
                            {% if feature.description %}
                            <p class="feature-description">{{ feature.description }}</p>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    {% if block.content.button_text or block.content.cta_text %}
                    <div class="block-actions">
                        <a href="{{ block.content.button_url|default:block.content.cta_url|default:'#' }}" class="btn btn-primary">
                            {{ block.content.button_text|default:block.content.cta_text }}
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </section>
        {% endif %}
    </article>

    <aside class="sidebar">
        {% if widgets %}
        <section class="sidebar-widgets">
            {% for widget in widgets %}
            <div class="widget widget-{{ widget.definition.name }}">
                {% if widget.instance %}
                    {% if widget.instance.configuration %}
                        <div class="widget-content">
                            {% if widget.instance.configuration.badge %}
                            <span class="widget-badge">{{ widget.instance.configuration.badge }}</span>
                            {% endif %}

                            {% if widget.instance.configuration.headline %}
                            <h3 class="widget-headline">{{ widget.instance.configuration.headline }}</h3>
                            {% endif %}

                            {% if widget.instance.configuration.description %}
                            <p class="widget-description">{{ widget.instance.configuration.description }}</p>
                            {% endif %}

                            {% if widget.instance.configuration.offer %}
                            <p class="widget-offer">{{ widget.instance.configuration.offer }}</p>
                            {% endif %}

                            {% if widget.instance.configuration.cta_text or widget.instance.configuration.button_text %}
                            <a href="#" class="widget-cta btn btn-secondary">
                                {{ widget.instance.configuration.cta_text|default:widget.instance.configuration.button_text }}
                            </a>
                            {% endif %}
                        </div>
                    {% endif %}
                {% endif %}
            </div>
            {% endfor %}
        </section>
        {% else %}
        <div class="no-widgets">
            <p>No widgets available for this area.</p>
        </div>
        {% endif %}

        <section class="sidebar-info">
            <h3>Page Info</h3>
            <dl class="info-list">
                <dt>Slug:</dt>
                <dd><code>{{ page.slug }}</code></dd>
                <dt>Status:</dt>
                <dd><span class="status {{ page.status }}">{{ page.status }}</span></dd>
                <dt>Locale:</dt>
                <dd><span class="locale-badge">{{ locale }}</span></dd>
                {% if translation.path %}
                    <dt>Path:</dt>
                    <dd><code>{{ translation.path }}</code></dd>
                {% endif %}
            </dl>
        </section>
    </aside>
</div>
{% endblock %}
